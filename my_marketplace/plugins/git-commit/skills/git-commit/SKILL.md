---
name: git-commit
description: Auto stage all changes and generate commit message (no push)
tools: Bash
---

# /git-commit - Autonomous Git Commit (No Push)

## Purpose
Execute an autonomous git workflow: stage all changes and auto-generate a meaningful commit message based on the diff. Does NOT push to remote - changes remain local.

## Workflow Steps

### Step 1: Check Repository State
```bash
git status
git branch -vv
```
- Verify we're in a git repository
- Identify current branch and tracking remote
- Assess what changes exist

### Step 2: Stage All Changes
```bash
git add -A
```
- Stage all modified, deleted, and untracked files
- No prompting - stage everything

### Step 3: Generate Commit Message
```bash
git diff --staged --stat
git diff --staged
```
- Analyze the staged changes
- Auto-generate a concise, meaningful commit message following these rules:
  - Start with a verb (Add, Update, Fix, Remove, Refactor, etc.)
  - Summarize the primary change in under 72 characters
  - If multiple unrelated changes, list the most significant ones
  - Focus on the "what" and "why", not the "how"

### Step 4: Create Commit
```bash
git commit -m "$(cat <<'EOF'
<auto-generated commit message>

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
EOF
)"
```

### Step 5: Confirm Success
```bash
git status
git log -1 --oneline
```
- Report the LOCAL commit hash and message
- Remind user to push when ready

## Commit Message Generation Guidelines

Based on the diff, generate messages like:
- `Add user authentication with JWT tokens`
- `Fix null pointer exception in payment processing`
- `Update dependencies to latest versions`
- `Remove deprecated API endpoints`
- `Refactor database queries for performance`

For multiple changes:
- `Add login form and update navigation styling`
- `Fix validation bug and refactor error handling`

## Error Handling

- **Not a git repo**: Exit with clear message
- **No changes to commit**: Report "Nothing to commit, working tree clean"
- **Pre-commit hook failure**: Report the error, suggest fixing and re-running

## Autonomous Behavior

This skill does NOT ask for user input. It:
1. Stages everything automatically
2. Generates commit messages automatically
3. Creates the commit locally
4. Reports the result (does NOT push)

## Example Output

```
/git-commit

Checking repository... Branch: main (tracking origin/main)
Staging changes... 3 files modified, 1 file added
Generating commit... "Add commit plugin for local-only commits"

Local commit abc1234 created on branch main
Ready to push when you are (use /git-push or /git-push-agentic)
```
